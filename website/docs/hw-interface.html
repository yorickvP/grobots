<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><html lang=en><link rel=stylesheet title="Grobots Style" href="../grobots.css" media=all type="text/css"><link rel=home href="../"><link rel=contents href="./" title="Documentation Contents"><link rel=up href="./"><link rel=prev href='hardware.html' title='Hardware reference'><link rel=made href='mailto:dschudy@yahoo.com,wschudy@wpi.edu?subject=Grobots'><title>Grobots - Documentation - Hardware Interface</title><h1><a href='../'>Grobots</a> - <a href='./'>Documentation</a> - Hardware Interface</h1><h2 id=basics>Basics</h2><table><col><col><tr><th>Variable<th>Meaning<tr><td><code>time</code><td>The time in frames since the simulation started.<tr><td><code>world-size</code><td>Vector: the size of the world.<tr><td><code>world-width</code><td>the width of the world.<tr><td><code>world-height</code><td>the height of the world.<tr><td><code>position</code><td>Vector: current position of this cell.<tr><td><code>velocity</code><td>Vector: current velocity of this cell.<tr><td><code>radius</code><td><tr><td><code>mass</code><td><tr><td><code>speed</code><td><tr><td><code>side</code><td>ID of this side<tr><td><code>type</code><td>ID of this type<tr><td><code>id</code><td>ID of this robot, unique within the side<tr><td><code>parent-id</code><td>ID of this robot's parent, or 0 if it was seeded<tr><td><code>processor</code><td><tr><td><code>remaining</code><td>Instructions remaining this frame.<tr><td><code>engine-power</code><td>Writable.<tr><td><code>engine-max-power</code><td><tr><td><code>engine-velocity</code><td>Vector: the velocity the engine will seek.<tr><td><code>collision</code><td>Number of robots or walls this cell is currently touching.<tr><td><code>friendly-collision</code><td>Number of friendly robots this cell is currently touching.<tr><td><code>enemy-collision</code><td>Number of enemy robots this cell is currently touching.<tr><td><code>food-collision</code><td>Number of foods this cell is currently touching.<tr><td><code>shot-collision</code><td>Number of shots this cell is currently touching.<tr><td><code>wall-collision</code><td>Number of walls this cell is currently touching.<tr><td><code>flag</code><td>Variable visible to other robots, for communication.</table><table><col width='15%'><col width='20%'><col><tr><th>Operator<th>Stack diagram<th>Comments<tr><td><code>seek-location</code><td>x y --<td>A convenient way to set <code>engine-velocity</code> to go toward a location, or stop if close. Typical use: <code>food-position seek-location</code>.<tr><td><code>seek-moving-location</code><td>x y vx vy --<td>Like <code>seek-location</code>, but seeks a moving target. Typical use: <code>robot-position robot-velocity seek-moving-location</code>.<tr><td><code>restrict-position</code><td>x y walldist -- x y<td>Move position to stay walldist awy from the walls.<tr><td><code>die</code><td>--<td>Blows up the robot. Useful for missiles and maybe apoptosis.<tr><td><code>write</code><td>value address --<td>Write <var>value</var> to <var>address</var> in shared memory. Addresses range from 1 to 1000.<tr><td><code>read</code><td>address -- value<td>Read <var>value</var> from <var>address</var> in shared memory.<tr><td><code>vwrite</code><td>vector address --<td>Write <var>vector</var> to <var>address</var> and <var>address</var> + 1.<tr><td><code>vread</code><td>address -- vector<td>Read <var>vector</var> from <var>address</var> and <var>address</var> + 1.<tr><td><code>messages</code><td>channel -- n<td>Return the number of messages waiting on the given channel.<tr><td><code>send</code><td>message length channel --<td>A message-passing style communications system. Each of the 10 channels contains a queue of up to 50 messages, each of which can be up to 8 values long. Typical use:<code>food-position time 3 1 send</code>.<tr><td><code>receive</code><td> channel -- message length<td>Length returned is zero if no message is available. Length 0 messages are prohibited to avoid confusion. The following code goes to the location specified in the message if the timestamp included in the message is recent. (This assumes that all messages on channel 1 are food-position / time pairs, length in this example is used only to decide if a message was received. Reliable code might want to check to see if the length is as expected): <code>1 receive if time 50 - &gt; if seek-location else 2drop then then</code><tr><td><code>clear-messages</code><td>channel --<td>Skips over (for this cell) all messages currently waiting on the given channel.<tr><td><code>skip-messages</code><td>n channel --<td>Skips over up to n messages.<tr><td><code>type-population</code><td>type-id -- n<td>return the number of cells of the given type.</table><h2 id=energy>Energy-related</h2><table><col width='15%'><col><tr><th>Variable<th>Meaning<tr><td><code>energy</code><td><tr><td><code>max-energy</code><td><tr><td><code>solar-cells</code><td><tr><td><code>eater</code><td><tr><td><code>eaten</code><td>how much food was eaten this frame<tr><td><code>syphon-max-rate</code><td><tr><td><code>syphon-range</code><td>Maximum distance the syphon can reach<tr><td><code>syphon-distance</code><td>Current distance.<tr><td><code>syphon-direction</code><td><tr><td><code>syphon-rate</code><td>How fast (and which way) to move energy. Set to zero to turn off the syphon.<tr><td><code>syphoned</code><td>Amount of energy the syphon provided last frame. Negative if energy was given instead of taken.</table><h2 id=constructor>Constructor</h2><table><col width='15%'><col><tr><th>Variable<th>Meaning<tr><td><code>constructor-max-rate</code><td>How fast the constructor can run.<tr><td><code>constructor-rate</code><td>How fast the custructor is running.<tr><td><code>constructor-type</code><td>ID of the child's type. Upon birth, this is automatically reset to 0.<tr><td><code>constructor-progress</code><td>How much energy we've put into the child so far.<tr><td><code>constructor-remaining</code><td>How much energy is needed to finish the child.<tr><td><code>child-id</code><td>ID of the last child created, or 0.</table><table><col width='15%'><col width='20%'><col><tr><th>Operator<th>Stack diagram<th>Comments<tr><td><code>autoconstruct</code><td>--<td>Turn the constructor on iff we have plenty of energy. Start a new child if necessary.<tr><td><code>balance-type</code><td>fraction type --<td>Sets constructor-type if type's fraction of population is less than fraction.</table><h2 id=sensors>Sensors</h2><p>Only robot sensor is shown here; the food and shot sensors are identical except where noted.<table><col width='15%'><col><tr><th>Variable<th>Meaning<tr><td><code>robot-sensor-range</code><td><tr><td><code>robot-sensor-firing-cost</code><td><tr><td><code>robot-sensor-time</code><td>Time the sensor was last fired.<tr><td><code>robot-found</code><td>Number of robots seen. May be more than <code>num-robot-results</code>.<tr><td><code>robot-position</code><td>Vector.<tr><td><code>robot-velocity</code><td>Vector.<tr><td><code>robot-position-overall</code><td>Vector: average position of all robots seen.<tr><td><code>robot-distance</code><td><tr><td><code>robot-direction</code><td><tr><td><code>robot-distance-overall</code><td>Distance to <code>robot-position-overall</code>.<tr><td><code>robot-direction-overall</code><td>Direction of <code>robot-position-overall</code>.<tr><td><code>robot-side</code><td>ID, or 0 if neutral.<tr><td><code>robot-type</code><td>For robots, the type's ID. For shots, 1 = blaster, 2 = grenade, 3 = syphon, 4 = enemy-syphon, 5 = forcefield, 0 otherwise. Not available for food.<tr><td><code>robot-id</code><td>Only for robots.<tr><td><code>robot-radius</code><td><tr><td><code>robot-mass</code><td>Not available for shots.<tr><td><code>robot-energy</code><td>Not available for shots.<tr><td><code>robot-flag</code><td>For robots only, the cell's <code>flag</code> variable.<tr><td><code>shot-power</code><td>How powerful the shot is. Units depend on the type of shot. Only for shots.<tr><td><code>robot-shield-fraction</code><td>The fraction of damage that will get through the robot's shield. Only for robots.<tr><td><code>robot-bomb</code><td>How large a bomb the robot has. Only for robots.<tr><td><code>robot-reloading</code><td>Whether the robot has fired a weapon lately. Only for robots.<tr><td><code>num-robot-results</code><td>Number of available sensor results.<tr><td><code>current-robot-result</code><td>Current sensor result (0 to num - 1). Writable.<tr><td><code>robot-sensor-sees-friends</code><td>Writable boolean: whether the sensor will see friendly robots. 0 by default.<tr><td><code>robot-sensor-sees-enemies</code><td>Writable boolean: whether the sensor will see enemies. 1 by default.<tr><td><code>shot-sensor-sees-friendly</code><td rowspan=2>Shot sensor equivalent to <code>robot-sensor-sees-friends</code>/<code>enemies</code>. There is no equivalent for food sensors.<tr><td><code>shot-sensor-sees-enemy</code><tr><td><code>robot-sensor-focus-distance</code><td rowspan=2>Results are sorted by distance from the focus, which is (awkwardly) in polar coordinates relative to the robot firing the sensor.<tr><td><code>robot-sensor-focus-direction</code></table><table><col width='15%'><col width='20%'><col><tr><th>Operator<th>Stack diagram<th>Comments<tr><td><code>fire-robot-sensor</code><td>--<td><tr><td><code>next-robot</code><td>-- success <td>Advances to the next sensor result. If there are no more results, returns to the first result. Returns 0 if wraparound occured, 1 otherwise. Suggested use: <code>robot-found if do <var>process sensor result</var> next-robot while-loop then</code><tr><td><code>periodic-robot-sensor</code><td>period -- fired?<td>If the sensor hasn't fired in (period - 1) frames, fire it and sync. Return whether we fired.</table><h2 id=defenses>Defenses</h2><table><col width='15%'><col><tr><th>Variable<th>Meaning<tr><td><code>armor</code><td>Armor remaining.<tr><td><code>max-armor</code><td>Maximum (= initial) armor.<tr><td><code>repair-rate</code><td>Current repair power. Writable.<tr><td><code>max-repair-rate</code><td><tr><td><code>shield</code><td>Shield setting. Writable.<tr><td><code>max-shield</code><td><tr><td><code>shield-fraction</code><td>Fraction of damage that will get through the shield.<tr><td><code>last-hit</code><td>ID of the last side that damaged this cell, or 0.</table><h2 id=weapons>Weapons</h2><table><col width='15%'><col><tr><th>Variable<th>Meaning<tr><td><code>blaster-damage</code><td><tr><td><code>blaster-range</code><td><tr><td><code>blaster-speed</code><td><tr><td><code>blaster-lifetime</code><td><tr><td><code>blaster-reload-time</code><td><tr><td><code>blaster-firing-cost</code><td><tr><td><code>blaster-cooldown</code><td>How many frames before the blaster can fire again.<tr><td><code>grenades-damage</code><td><tr><td><code>grenades-range</code><td><tr><td><code>grenades-speed</code><td><tr><td><code>grenades-lifetime</code><td><tr><td><code>grenades-reload-time</code><td><tr><td><code>grenades-firing-cost</code><td><tr><td><code>grenades-cooldown</code><td>How many frames before the grenade launcher can fire again.<tr><td><code>grenades-radius</code><td>The radius of the explosion the grenade will make.<tr><td><code>force-field-max-power</code><td><tr><td><code>force-field-range</code><td><tr><td><code>force-field-distance</code><td>Writable.<tr><td><code>force-field-direction</code><td>Writable.<tr><td><code>force-field-power</code><td>Current setting. Writable.<tr><td><code>force-field-angle</code><td>Direction the field pushes in. Writable.<tr><td><code>force-field-radius</code><td>The radius the forcefield will have at the current power.<tr><td><code>enemy-syphon-max-rate</code><td><tr><td><code>enemy-syphon-range</code><td>Maximum distance the syphon can reach.<tr><td><code>enemy-syphon-distance</code><td>Current distance.<tr><td><code>enemy-syphon-direction</code><td><tr><td><code>enemy-syphon-rate</code><td>How fast (and which way) to move energy. Set to zero to turn off the syphon.<tr><td><code>enemy-syphoned</code><td>Amount of energy the syphon provided last frame. Negative if energy was given instead of stolen.</table><table><col width='15%'><col width='20%'><col><tr><th>Operator<th>Stack diagram<th>Comments<tr><td><code>fire-blaster</code><td>direction --<td><tr><td><code>fire-grenade</code><td>distance direction --<td><tr><td><code>lead-blaster</code><td>target-position target-velocity --<td rowspan=2>Fires at a moving target, if the target will still be in range when the shot hits.<tr><td><code>lead-grenade</code><td>target-position target-velocity --<tr><td><code>set-force-field</code><td>position angle --<td>Turns the forcefield on at full power at the given location and angle.</table><p><address><a href='../'>Grobots</a> by Devon Schudy (<a href='mailto:dschudy@yahoo.com?subject=Grobots'>dschudy@yahoo.com</a>)and <a href="http://users.wpi.edu/~wschudy/">Warren Schudy</a> (<a href="mailto:wschudy@wpi.edu?subject=Grobots">wschudy@wpi.edu</a>)</address>